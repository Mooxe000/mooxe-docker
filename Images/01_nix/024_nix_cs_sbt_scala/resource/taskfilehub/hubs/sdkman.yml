version: '3'

tasks:

  default:
    cmds:
      - echo 'Hello World from Task!'
    silent: true

  fn-install-sdk:
    vars:
      bash_env: |-
        export {{.upname}}_HOME=$HOME/.sdkman/candidates/{{.lwname}}/current
        export PATH=$PATH:${{.upname}}_HOME/bin
      fish_env: |-
        set -gx {{.upname}}_HOME $HOME/.sdkman/candidates/{{.lwname}}/current
        set -gx PATH $PATH:${{.upname}}_HOME/bin
    cmds:
      - bash -lc '{{.precmds}}
          sdk i {{.lwname}} $SDK_{{.upname}}_VERSION'
      - echo '{{.bash_env}}' >> $HOME/.profile
      - echo '{{.fish_env}}' >> $HOME/.config/fish/config.fish
