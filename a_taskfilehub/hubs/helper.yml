version: '3'

tasks:

  default:
    cmds:
      - echo 'Hello World from Task!'
    silent: true

  fn-profile:
    cmds:
      - echo '{{.bash_env}}' >> $HOME/.profile
      - echo '{{.fish_env}}' >> $HOME/.config/fish/config.fish

  fn-env-kv:
    vars:
      env_key: '{{.env_key}}'
      env_value: '{{.env_value}}'
    cmds:
      - task: fn-profile
        vars:
          bash_env: export {{.env_key}}="{{.env_value}}"
          fish_env: set -gx {{.env_key}} "{{.env_value}}"

  fn-download:
    vars:
      git_host: download.fastgit.org

      dl_bin: axel
      dl_cmd: '{{.dl_bin}}'
    cmds:
      - '
        {{.dl_cmd}} https://{{.git_host}}/{{.git_repo}}{{.url_postfix}}
        '
